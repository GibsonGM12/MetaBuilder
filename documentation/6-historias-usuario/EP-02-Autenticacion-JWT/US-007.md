# US-007: Implementar servicio de autenticación y JWT

## Información General

| Campo | Valor |
|-------|-------|
| **ID** | US-007 |
| **Título** | Implementar servicio de autenticación y JWT |
| **Épica** | EP-02: Autenticación JWT |
| **Prioridad** | P0 (Crítica) |
| **Estimación** | 45 min |
| **Dependencias** | US-006 |

## Historia de Usuario

**Como** desarrollador backend,

**Quiero** un servicio que genere y valide tokens JWT,

**Para** proteger los endpoints de la API.

## Descripción

Implementar AuthService con métodos register y login, y JwtService para manejo de tokens.

## Criterios de Aceptación

```gherkin
Scenario: Registro de usuario exitoso
  Given que el username "testuser" no existe
  When registro un usuario con password "Test123!"
  Then el usuario se crea con password hasheado (bcrypt)
  And el password original no se almacena en la base de datos

Scenario: Login genera token JWT
  Given que existe el usuario "admin" con password "Admin123!"
  When hago login con credenciales correctas
  Then recibo un token JWT válido
  And el token contiene claims: sub (user_id), username, role, exp

Scenario: Login con credenciales incorrectas
  Given que existe el usuario "admin"
  When hago login con password incorrecto
  Then recibo un error de autenticación (401)
```

## Notas Adicionales

- Usar bcrypt para hash de passwords
- Configurar expiración de JWT desde variables de entorno
- Algoritmo HS256 para JWT

## Historias de Usuario Relacionadas

- US-006: Crear entidad User y tabla en base de datos
- US-008: Crear endpoints de autenticación
