# US-016: Implementar creación dinámica de tablas

## Información General

| Campo | Valor |
|-------|-------|
| **ID** | US-016 |
| **Título** | Implementar creación dinámica de tablas |
| **Épica** | EP-03: Gestión de Metadatos |
| **Prioridad** | P0 (Crítica) |
| **Estimación** | 90 min |
| **Dependencias** | US-013 |

## Historia de Usuario

**Como** administrador,

**Quiero** que al crear una entidad se cree automáticamente su tabla en PostgreSQL,

**Para** poder almacenar registros de esa entidad inmediatamente.

## Descripción

Implementar TableManager que ejecute CREATE TABLE dinámico basado en metadatos.

## Criterios de Aceptación

```gherkin
Scenario: Crear entidad genera tabla física
  Given que voy a crear la entidad "productos"
  When creo la entidad via API
  Then existe una tabla entity_{uuid} en PostgreSQL
  And la tabla tiene columnas: id (UUID PK), created_at (TIMESTAMP)

Scenario: Mapeo de tipos es correcto
  Given que tengo campos de diferentes tipos
  When creo la entidad con sus campos
  Then TEXT -> VARCHAR(n), NUMBER -> DECIMAL(10,2), INTEGER -> INTEGER
  And DATE -> DATE, BOOLEAN -> BOOLEAN
```

## Notas Adicionales

- Usar SQLAlchemy DDL para ejecutar CREATE TABLE
- Mapeo de tipos: TEXT->VARCHAR, NUMBER->DECIMAL, INTEGER->INTEGER, DATE->DATE, BOOLEAN->BOOLEAN

## Historias de Usuario Relacionadas

- US-013: Implementar MetadataService con lógica de negocio
- US-017: Implementar ALTER TABLE al agregar campos
- US-018: Crear repositorio de datos dinámicos
