# US-015: Crear MetadataRouter con endpoints REST

## Información General

| Campo | Valor |
|-------|-------|
| **ID** | US-015 |
| **Título** | Crear MetadataRouter con endpoints REST |
| **Épica** | EP-03: Gestión de Metadatos |
| **Prioridad** | P0 (Crítica) |
| **Estimación** | 60 min |
| **Dependencias** | US-013, US-014 |

## Historia de Usuario

**Como** administrador,

**Quiero** endpoints REST para gestionar entidades y campos,

**Para** poder crear y configurar entidades desde el frontend.

## Descripción

Crear router con endpoints CRUD para entidades y campos, protegidos con rol Admin.

## Criterios de Aceptación

```gherkin
Scenario: CRUD de entidades via API
  Given que estoy autenticado como Admin
  When ejecuto operaciones CRUD en /api/metadata/entities
  Then todas las operaciones responden correctamente
  And las validaciones retornan 400 con mensajes claros

Scenario: Solo Admin puede acceder
  Given que estoy autenticado como User (no Admin)
  When intento acceder a /api/metadata/entities
  Then recibo status 403 Forbidden

Scenario: Swagger documenta los endpoints
  Given que la API está corriendo
  When accedo a /docs
  Then veo todos los endpoints de metadata documentados
```

## Notas Adicionales

- Endpoints: GET, POST, PUT, DELETE para entities
- Endpoints: POST, DELETE para fields dentro de una entidad

## Historias de Usuario Relacionadas

- US-009: Configurar middleware de autorización
- US-013: Implementar MetadataService con lógica de negocio
- US-014: Crear DTOs para metadatos
