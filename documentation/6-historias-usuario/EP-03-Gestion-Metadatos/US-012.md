# US-012: Implementar MetadataRepository

## Información General

| Campo | Valor |
|-------|-------|
| **ID** | US-012 |
| **Título** | Implementar MetadataRepository |
| **Épica** | EP-03: Gestión de Metadatos |
| **Prioridad** | P0 (Crítica) |
| **Estimación** | 45 min |
| **Dependencias** | US-011 |

## Historia de Usuario

**Como** desarrollador backend,

**Quiero** un repositorio para gestionar metadatos,

**Para** separar la lógica de acceso a datos de la lógica de negocio.

## Descripción

Crear MetadataRepository con métodos CRUD para entidades y campos usando SQLAlchemy ORM.

## Criterios de Aceptación

```gherkin
Scenario: CRUD de entidades funciona
  Given que MetadataRepository está implementado
  When creo, leo, actualizo y elimino una entidad
  Then todas las operaciones se ejecutan correctamente
  And get_entity_by_id incluye los campos relacionados (joinedload)

Scenario: CRUD de campos funciona
  Given que existe una entidad
  When agrego, listo y elimino campos
  Then todas las operaciones se ejecutan correctamente
  And los campos se eliminan cuando se elimina la entidad (cascade)
```

## Notas Adicionales

- Usar joinedload para cargar campos relacionados eficientemente
- Implementar transacciones para operaciones compuestas

## Historias de Usuario Relacionadas

- US-011: Crear tablas de metadatos en base de datos
- US-013: Implementar MetadataService con lógica de negocio
- US-020: Implementar validador de datos dinámicos
