# US-013: Implementar MetadataService con lógica de negocio

## Información General

| Campo | Valor |
|-------|-------|
| **ID** | US-013 |
| **Título** | Implementar MetadataService con lógica de negocio |
| **Épica** | EP-03: Gestión de Metadatos |
| **Prioridad** | P0 (Crítica) |
| **Estimación** | 60 min |
| **Dependencias** | US-012 |

## Historia de Usuario

**Como** desarrollador backend,

**Quiero** un servicio que orqueste las operaciones de metadatos,

**Para** aplicar validaciones y lógica de negocio antes de persistir.

## Descripción

Implementar MetadataService que valide datos, genere nombres de tabla y coordine con el repositorio.

## Criterios de Aceptación

```gherkin
Scenario: Crear entidad genera table_name automático
  Given que voy a crear una entidad con name "productos"
  When creo la entidad via MetadataService
  Then table_name se genera como "entity_{uuid}"
  And la entidad se guarda en base de datos

Scenario: Validación de nombre duplicado
  Given que existe una entidad con name "productos"
  When intento crear otra entidad con name "productos"
  Then recibo un error de nombre duplicado
  And la entidad no se crea

Scenario: Agregar campo valida nombre único en entidad
  Given que existe una entidad con campo "nombre"
  When intento agregar otro campo "nombre" a la misma entidad
  Then recibo un error de campo duplicado
```

## Notas Adicionales

- Generar table_name con formato entity_{uuid} para evitar colisiones
- Validar nombres antes de crear

## Historias de Usuario Relacionadas

- US-012: Implementar MetadataRepository
- US-015: Crear MetadataRouter con endpoints REST
- US-016: Implementar creación dinámica de tablas
