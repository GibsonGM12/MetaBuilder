# US-004: Configurar SQLAlchemy y Alembic

## Información General

| Campo | Valor |
|-------|-------|
| **ID** | US-004 |
| **Título** | Configurar SQLAlchemy y Alembic para migraciones |
| **Épica** | EP-01: Setup y Configuración |
| **Prioridad** | P0 (Crítica) |
| **Estimación** | 30 min |
| **Dependencias** | US-002 |

## Historia de Usuario

**Como** desarrollador backend,

**Quiero** configurar SQLAlchemy con PostgreSQL y Alembic,

**Para** poder crear y gestionar la base de datos con migraciones versionadas.

## Descripción

Configurar conexión a PostgreSQL mediante SQLAlchemy e inicializar Alembic para migraciones.

## Criterios de Aceptación

```gherkin
Scenario: Conexión a base de datos funcional
  Given que PostgreSQL está corriendo
  And existe el archivo database.py con la configuración
  When importo el engine y ejecuto una query de prueba
  Then la conexión es exitosa

Scenario: Alembic genera migraciones
  Given que Alembic está inicializado
  And existe al menos un modelo SQLAlchemy
  When ejecuto alembic revision --autogenerate
  Then se crea un archivo de migración en alembic/versions/
  And el archivo contiene los cambios detectados
```

## Notas Adicionales

- Usar connection string desde variables de entorno
- Configurar SessionLocal factory para inyección de dependencias

## Historias de Usuario Relacionadas

- US-002: Configurar Docker Compose con PostgreSQL
- US-006: Crear entidad User y tabla en base de datos
- US-010: Crear entidades de dominio para metadatos
