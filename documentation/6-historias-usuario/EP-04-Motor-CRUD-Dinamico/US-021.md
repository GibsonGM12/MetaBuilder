# US-021: Implementar DynamicCrudService

## Información General

| Campo | Valor |
|-------|-------|
| **ID** | US-021 |
| **Título** | Implementar DynamicCrudService |
| **Épica** | EP-04: Motor CRUD Dinámico |
| **Prioridad** | P0 (Crítica) |
| **Estimación** | 120 min |
| **Dependencias** | US-019, US-020 |

## Historia de Usuario

**Como** desarrollador backend,

**Quiero** un servicio que orqueste operaciones CRUD dinámicas,

**Para** centralizar la lógica de negocio del CRUD genérico.

## Descripción

Implementar servicio que coordine metadatos, validación, construcción de queries y ejecución.

## Criterios de Aceptación

```gherkin
Scenario: Crear registro completo
  Given que existe la entidad "productos" con campos
  When creo un registro con datos válidos
  Then el registro se inserta en la tabla dinámica
  And recibo el registro con id generado

Scenario: Listar registros con paginación
  Given que existen 50 registros
  When listo con page=1, page_size=20
  Then recibo 20 registros
  And recibo metadata de paginación: total_records=50, total_pages=3

Scenario: Error de validación retorna errores claros
  Given que voy a crear un registro con datos inválidos
  When intento crear el registro
  Then recibo lista de errores de validación
  And el registro no se crea
```

## Notas Adicionales

- Inyectar MetadataRepository, DynamicDataRepository, QueryBuilder, DataValidator
- Calcular total_pages correctamente

## Historias de Usuario Relacionadas

- US-019: Implementar DynamicQueryBuilder
- US-020: Implementar validador de datos dinámicos
- US-023: Crear CrudRouter con endpoints REST
